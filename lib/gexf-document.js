define(['lib/gexf-document-writer' ], function(GexfDocWriter) {
  'use strict';

  function GexfDocument(options) {

    this.default = {
      version : "1.0",
      encoding: "UTF-8",
      type: 'undirected',
      attributes: {},
      meta: {
        creator    : 'gexf-writer',
        description: 'GEXF document generated by gexf-writer'
      }
    };

    // extend default options
    if (typeof options == 'object') {
      
      for (var key in options) {
        if (this.default[key]) {
          this.default[key] = options[key];
        }
      }
    }

    this.nodes = [];
    this.edges = [];

    this.getOp    = function(key) {
      return this.default[key];
    },

    this.getNodes = function() {
      return this.nodes;
    },

    this.getEdges = function() {
      return this.edges;
    },

    this.addNode  = function(id, label, attributes) {

      this.nodes[id] = {
        id: id,
        label: label,
        attributes : attributes
      };

      return this;
    },

    this.addEdge = function(id, source, target, weight, attributes) {

      this.edges[id] = {
        id     : id,
        source : source,
        target : target,
        weight : weight,
        attributes : attributes
      };
      
      return this;
    },

    this.toString = function() {
      return new GexfDocWriter(this).toString();
    };

  };


  return GexfDocument;
});